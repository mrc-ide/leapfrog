// Generated by leapfrog cpp_generation: do not edit by hand
// This file is automatically generated. Do not edit this file. If you want to make changes
// edit leapfrog json files in `cpp_generation/modelSchemas` and run `uv run ./src/main.py` inside
// the `cpp_generation` folder.

#pragma once

#include "hdf5_utils.hpp"
#include "../config_mixer.hpp"

namespace leapfrog {
namespace internal {

template<typename real_type, MV ModelVariant>
struct DpAdapter<Language::Cpp, real_type, ModelVariant> {
  using SS = SSMixed<ModelVariant>;
  using Config = DpConfig<real_type, ModelVariant>;

  static Config::Pars get_pars(
    OwnedParsMixed<real_type, ModelVariant>::Pars& owned_pars
  ) {
    return {
      .base_pop = { owned_pars.dp.base_pop.data(), owned_pars.dp.base_pop.shape() },
      .survival_probability = { owned_pars.dp.survival_probability.data(), owned_pars.dp.survival_probability.shape() },
      .net_migration = { owned_pars.dp.net_migration.data(), owned_pars.dp.net_migration.shape() },
      .age_specific_fertility_rate = { owned_pars.dp.age_specific_fertility_rate.data(), owned_pars.dp.age_specific_fertility_rate.shape() },
      .births_sex_prop = { owned_pars.dp.births_sex_prop.data(), owned_pars.dp.births_sex_prop.shape() },
      .total_fertility_rate = { owned_pars.dp.total_fertility_rate.data(), owned_pars.dp.total_fertility_rate.shape() }
    };
  };

  static constexpr int output_count = 3;

  static int build_output(
    int index,
    const Config::OutputState& state,
    std::filesystem::path& output_file
  ) {
    write_data<real_type, typename Config::OutputState::shape_p_totpop>(output_file, "p_totpop", state.p_totpop);
    write_data<real_type, typename Config::OutputState::shape_p_deaths_background_totpop>(output_file, "p_deaths_background_totpop", state.p_deaths_background_totpop);
    write_data<real_type, typename Config::OutputState::shape_births>(output_file, "births", state.births);
    return index + output_count;
  };
};

template<typename real_type, MV ModelVariant>
struct HaAdapter<Language::Cpp, real_type, ModelVariant> {
  using SS = SSMixed<ModelVariant>;
  using Config = HaConfig<real_type, ModelVariant>;

  static Config::Pars get_pars(
    OwnedParsMixed<real_type, ModelVariant>::Pars& owned_pars
  ) {
    return {
      .incidence_model_choice = owned_pars.ha.incidence_model_choice,
      .input_adult_incidence_rate = { owned_pars.ha.input_adult_incidence_rate.data(), owned_pars.ha.input_adult_incidence_rate.shape() },
      .transmission_rate_hts = { owned_pars.ha.transmission_rate_hts.data(), owned_pars.ha.transmission_rate_hts.shape() },
      .initial_incidence = owned_pars.ha.initial_incidence,
      .epidemic_start_hts = owned_pars.ha.epidemic_start_hts,
      .relative_infectiousness_art = owned_pars.ha.relative_infectiousness_art,
      .incidence_rate_ratio_age = { owned_pars.ha.incidence_rate_ratio_age.data(), owned_pars.ha.incidence_rate_ratio_age.shape() },
      .incidence_rate_ratio_sex = { owned_pars.ha.incidence_rate_ratio_sex.data(), owned_pars.ha.incidence_rate_ratio_sex.shape() },
      .cd4_mortality = { owned_pars.ha.cd4_mortality.data(), owned_pars.ha.cd4_mortality.shape() },
      .cd4_progression = { owned_pars.ha.cd4_progression.data(), owned_pars.ha.cd4_progression.shape() },
      .cd4_initial_distribution = { owned_pars.ha.cd4_initial_distribution.data(), owned_pars.ha.cd4_initial_distribution.shape() },
      .scale_cd4_mortality = owned_pars.ha.scale_cd4_mortality,
      .idx_hm_elig = { owned_pars.ha.idx_hm_elig.data(), owned_pars.ha.idx_hm_elig.shape() },
      .art_mortality = { owned_pars.ha.art_mortality.data(), owned_pars.ha.art_mortality.shape() },
      .art_mortality_time_rate_ratio = { owned_pars.ha.art_mortality_time_rate_ratio.data(), owned_pars.ha.art_mortality_time_rate_ratio.shape() },
      .cd4_nonaids_excess_mort = { owned_pars.ha.cd4_nonaids_excess_mort.data(), owned_pars.ha.cd4_nonaids_excess_mort.shape() },
      .art_nonaids_excess_mort = { owned_pars.ha.art_nonaids_excess_mort.data(), owned_pars.ha.art_nonaids_excess_mort.shape() },
      .dropout_recover_cd4 = owned_pars.ha.dropout_recover_cd4,
      .dropout_rate = { owned_pars.ha.dropout_rate.data(), owned_pars.ha.dropout_rate.shape() },
      .adults_on_art = { owned_pars.ha.adults_on_art.data(), owned_pars.ha.adults_on_art.shape() },
      .adults_on_art_is_percent = { owned_pars.ha.adults_on_art_is_percent.data(), owned_pars.ha.adults_on_art_is_percent.shape() },
      .initiation_mortality_weight = owned_pars.ha.initiation_mortality_weight,
      .h_art_stage_dur = { owned_pars.ha.h_art_stage_dur.data(), owned_pars.ha.h_art_stage_dur.shape() },
      .pAG_INCIDPOP = owned_pars.ha.pAG_INCIDPOP,
      .pIDX_INCIDPOP = owned_pars.ha.pIDX_INCIDPOP,
      .fert_mult_by_age = { owned_pars.ha.fert_mult_by_age.data(), owned_pars.ha.fert_mult_by_age.shape() },
      .fert_mult_off_art = { owned_pars.ha.fert_mult_off_art.data(), owned_pars.ha.fert_mult_off_art.shape() },
      .fert_mult_on_art = { owned_pars.ha.fert_mult_on_art.data(), owned_pars.ha.fert_mult_on_art.shape() },
      .local_adj_factor = owned_pars.ha.local_adj_factor
    };
  };

  static constexpr int output_count = 18;

  static int build_output(
    int index,
    const Config::OutputState& state,
    std::filesystem::path& output_file
  ) {
    write_data<real_type, typename Config::OutputState::shape_p_hivpop>(output_file, "p_hivpop", state.p_hivpop);
    write_data<real_type, typename Config::OutputState::shape_p_deaths_background_hivpop>(output_file, "p_deaths_background_hivpop", state.p_deaths_background_hivpop);
    write_data<real_type, typename Config::OutputState::shape_h_hivpop>(output_file, "h_hivpop", state.h_hivpop);
    write_data<real_type, typename Config::OutputState::shape_h_artpop>(output_file, "h_artpop", state.h_artpop);
    write_data<real_type, typename Config::OutputState::shape_h_hiv_deaths_no_art>(output_file, "h_hiv_deaths_no_art", state.h_hiv_deaths_no_art);
    write_data<real_type, typename Config::OutputState::shape_h_deaths_excess_nonaids_no_art>(output_file, "h_deaths_excess_nonaids_no_art", state.h_deaths_excess_nonaids_no_art);
    write_data<real_type, typename Config::OutputState::shape_p_infections>(output_file, "p_infections", state.p_infections);
    write_data<real_type, typename Config::OutputState::shape_h_hiv_deaths_art>(output_file, "h_hiv_deaths_art", state.h_hiv_deaths_art);
    write_data<real_type, typename Config::OutputState::shape_h_deaths_excess_nonaids_on_art>(output_file, "h_deaths_excess_nonaids_on_art", state.h_deaths_excess_nonaids_on_art);
    write_data<real_type, typename Config::OutputState::shape_h_art_initiation>(output_file, "h_art_initiation", state.h_art_initiation);
    write_data<real_type, typename Config::OutputState::shape_p_hiv_deaths>(output_file, "p_hiv_deaths", state.p_hiv_deaths);
    write_data<real_type, typename Config::OutputState::shape_p_deaths_excess_nonaids>(output_file, "p_deaths_excess_nonaids", state.p_deaths_excess_nonaids);
    write_data<real_type, typename Config::OutputState::shape_p_net_migration_hivpop>(output_file, "p_net_migration_hivpop", state.p_net_migration_hivpop);
    write_data<real_type, typename Config::OutputState::shape_hiv_births_by_mat_age>(output_file, "hiv_births_by_mat_age", state.hiv_births_by_mat_age);
    write_data<real_type, typename Config::OutputState::shape_hiv_births>(output_file, "hiv_births", state.hiv_births);
    write_data<real_type, typename Config::OutputState::shape_prevalence_15to49_hts>(output_file, "prevalence_15to49_hts", state.prevalence_15to49_hts);
    write_data<real_type, typename Config::OutputState::shape_incidence_15to49_hts>(output_file, "incidence_15to49_hts", state.incidence_15to49_hts);
    write_data<real_type, typename Config::OutputState::shape_artcoverage_15to49_hts>(output_file, "artcoverage_15to49_hts", state.artcoverage_15to49_hts);
    return index + output_count;
  };
};

template<typename real_type, MV ModelVariant>
struct HcAdapter<Language::Cpp, real_type, ModelVariant> {
  using SS = SSMixed<ModelVariant>;
  using Config = HcConfig<real_type, ModelVariant>;

  static Config::Pars get_pars(
    OwnedParsMixed<real_type, ModelVariant>::Pars& owned_pars
  ) {
    return {
      .hc_nosocomial = { owned_pars.hc.hc_nosocomial.data(), owned_pars.hc.hc_nosocomial.shape() },
      .hc1_cd4_dist = { owned_pars.hc.hc1_cd4_dist.data(), owned_pars.hc.hc1_cd4_dist.shape() },
      .hc1_cd4_mort = { owned_pars.hc.hc1_cd4_mort.data(), owned_pars.hc.hc1_cd4_mort.shape() },
      .hc2_cd4_mort = { owned_pars.hc.hc2_cd4_mort.data(), owned_pars.hc.hc2_cd4_mort.shape() },
      .hc1_cd4_prog = { owned_pars.hc.hc1_cd4_prog.data(), owned_pars.hc.hc1_cd4_prog.shape() },
      .hc2_cd4_prog = { owned_pars.hc.hc2_cd4_prog.data(), owned_pars.hc.hc2_cd4_prog.shape() },
      .ctx_val = { owned_pars.hc.ctx_val.data(), owned_pars.hc.ctx_val.shape() },
      .hc_art_elig_age = { owned_pars.hc.hc_art_elig_age.data(), owned_pars.hc.hc_art_elig_age.shape() },
      .hc_art_elig_cd4 = { owned_pars.hc.hc_art_elig_cd4.data(), owned_pars.hc.hc_art_elig_cd4.shape() },
      .hc_art_mort_rr = { owned_pars.hc.hc_art_mort_rr.data(), owned_pars.hc.hc_art_mort_rr.shape() },
      .hc1_art_mort = { owned_pars.hc.hc1_art_mort.data(), owned_pars.hc.hc1_art_mort.shape() },
      .hc2_art_mort = { owned_pars.hc.hc2_art_mort.data(), owned_pars.hc.hc2_art_mort.shape() },
      .hc_art_isperc = { owned_pars.hc.hc_art_isperc.data(), owned_pars.hc.hc_art_isperc.shape() },
      .hc_art_val = { owned_pars.hc.hc_art_val.data(), owned_pars.hc.hc_art_val.shape() },
      .hc_art_init_dist = { owned_pars.hc.hc_art_init_dist.data(), owned_pars.hc.hc_art_init_dist.shape() },
      .PMTCT = { owned_pars.hc.PMTCT.data(), owned_pars.hc.PMTCT.shape() },
      .vertical_transmission_rate = { owned_pars.hc.vertical_transmission_rate.data(), owned_pars.hc.vertical_transmission_rate.shape() },
      .PMTCT_transmission_rate = { owned_pars.hc.PMTCT_transmission_rate.data(), owned_pars.hc.PMTCT_transmission_rate.shape() },
      .PMTCT_dropout = { owned_pars.hc.PMTCT_dropout.data(), owned_pars.hc.PMTCT_dropout.shape() },
      .PMTCT_input_is_percent = { owned_pars.hc.PMTCT_input_is_percent.data(), owned_pars.hc.PMTCT_input_is_percent.shape() },
      .breastfeeding_duration_art = { owned_pars.hc.breastfeeding_duration_art.data(), owned_pars.hc.breastfeeding_duration_art.shape() },
      .breastfeeding_duration_no_art = { owned_pars.hc.breastfeeding_duration_no_art.data(), owned_pars.hc.breastfeeding_duration_no_art.shape() },
      .infant_pop = { owned_pars.hc.infant_pop.data(), owned_pars.hc.infant_pop.shape() },
      .mat_hiv_births = { owned_pars.hc.mat_hiv_births.data(), owned_pars.hc.mat_hiv_births.shape() },
      .mat_prev_input = { owned_pars.hc.mat_prev_input.data(), owned_pars.hc.mat_prev_input.shape() },
      .prop_lt200 = { owned_pars.hc.prop_lt200.data(), owned_pars.hc.prop_lt200.shape() },
      .prop_gte350 = { owned_pars.hc.prop_gte350.data(), owned_pars.hc.prop_gte350.shape() },
      .ctx_val_is_percent = { owned_pars.hc.ctx_val_is_percent.data(), owned_pars.hc.ctx_val_is_percent.shape() },
      .hc_art_is_age_spec = { owned_pars.hc.hc_art_is_age_spec.data(), owned_pars.hc.hc_art_is_age_spec.shape() },
      .abortion = { owned_pars.hc.abortion.data(), owned_pars.hc.abortion.shape() },
      .patients_reallocated = { owned_pars.hc.patients_reallocated.data(), owned_pars.hc.patients_reallocated.shape() },
      .hc_art_ltfu = { owned_pars.hc.hc_art_ltfu.data(), owned_pars.hc.hc_art_ltfu.shape() },
      .adult_female_infections = { owned_pars.hc.adult_female_infections.data(), owned_pars.hc.adult_female_infections.shape() },
      .adult_female_hivnpop = { owned_pars.hc.adult_female_hivnpop.data(), owned_pars.hc.adult_female_hivnpop.shape() },
      .total_births = { owned_pars.hc.total_births.data(), owned_pars.hc.total_births.shape() },
      .ctx_effect = { owned_pars.hc.ctx_effect.data(), owned_pars.hc.ctx_effect.shape() },
      .hc_art_start = owned_pars.hc.hc_art_start,
      .local_adj_factor = owned_pars.hc.local_adj_factor,
      .hc_age_specific_fertility_rate = { owned_pars.hc.hc_age_specific_fertility_rate.data(), owned_pars.hc.hc_age_specific_fertility_rate.shape() }
    };
  };

  static constexpr int output_count = 16;

  static int build_output(
    int index,
    const Config::OutputState& state,
    std::filesystem::path& output_file
  ) {
    write_data<real_type, typename Config::OutputState::shape_hc1_hivpop>(output_file, "hc1_hivpop", state.hc1_hivpop);
    write_data<real_type, typename Config::OutputState::shape_hc2_hivpop>(output_file, "hc2_hivpop", state.hc2_hivpop);
    write_data<real_type, typename Config::OutputState::shape_hc1_artpop>(output_file, "hc1_artpop", state.hc1_artpop);
    write_data<real_type, typename Config::OutputState::shape_hc2_artpop>(output_file, "hc2_artpop", state.hc2_artpop);
    write_data<real_type, typename Config::OutputState::shape_hc1_noart_aids_deaths>(output_file, "hc1_noart_aids_deaths", state.hc1_noart_aids_deaths);
    write_data<real_type, typename Config::OutputState::shape_hc2_noart_aids_deaths>(output_file, "hc2_noart_aids_deaths", state.hc2_noart_aids_deaths);
    write_data<real_type, typename Config::OutputState::shape_hc1_art_aids_deaths>(output_file, "hc1_art_aids_deaths", state.hc1_art_aids_deaths);
    write_data<real_type, typename Config::OutputState::shape_hc2_art_aids_deaths>(output_file, "hc2_art_aids_deaths", state.hc2_art_aids_deaths);
    write_data<real_type, typename Config::OutputState::shape_hc_art_init>(output_file, "hc_art_init", state.hc_art_init);
    write_data<real_type, typename Config::OutputState::shape_hc_art_need_init>(output_file, "hc_art_need_init", state.hc_art_need_init);
    write_data<real_type, typename Config::OutputState::shape_ctx_need>(output_file, "ctx_need", state.ctx_need);
    write_data<real_type, typename Config::OutputState::shape_infection_by_type>(output_file, "infection_by_type", state.infection_by_type);
    write_data<real_type, typename Config::OutputState::shape_mtct_by_source_tr>(output_file, "mtct_by_source_tr", state.mtct_by_source_tr);
    write_data<real_type, typename Config::OutputState::shape_mtct_by_source_women>(output_file, "mtct_by_source_women", state.mtct_by_source_women);
    write_data<real_type, typename Config::OutputState::shape_mtct_by_source_hc_infections>(output_file, "mtct_by_source_hc_infections", state.mtct_by_source_hc_infections);
    write_data<real_type, typename Config::OutputState::shape_pmtct_coverage_at_delivery>(output_file, "pmtct_coverage_at_delivery", state.pmtct_coverage_at_delivery);
    return index + output_count;
  };
};

template<typename real_type, MV ModelVariant>
struct SpAdapter<Language::Cpp, real_type, ModelVariant> {
  using SS = SSMixed<ModelVariant>;
  using Config = SpConfig<real_type, ModelVariant>;

  static Config::Pars get_pars(
    OwnedParsMixed<real_type, ModelVariant>::Pars& owned_pars
  ) {
    return {
    };
  };

  static constexpr int output_count = 4;

  static int build_output(
    int index,
    const Config::OutputState& state,
    std::filesystem::path& output_file
  ) {
    write_data<real_type, typename Config::OutputState::shape_p_deaths_nonaids_artpop>(output_file, "p_deaths_nonaids_artpop", state.p_deaths_nonaids_artpop);
    write_data<real_type, typename Config::OutputState::shape_p_deaths_nonaids_hivpop>(output_file, "p_deaths_nonaids_hivpop", state.p_deaths_nonaids_hivpop);
    write_data<real_type, typename Config::OutputState::shape_p_excess_deaths_nonaids_on_art>(output_file, "p_excess_deaths_nonaids_on_art", state.p_excess_deaths_nonaids_on_art);
    write_data<real_type, typename Config::OutputState::shape_p_excess_deaths_nonaids_no_art>(output_file, "p_excess_deaths_nonaids_no_art", state.p_excess_deaths_nonaids_no_art);
    return index + output_count;
  };
};

} // namespace internal
} // namespace leapfrog
